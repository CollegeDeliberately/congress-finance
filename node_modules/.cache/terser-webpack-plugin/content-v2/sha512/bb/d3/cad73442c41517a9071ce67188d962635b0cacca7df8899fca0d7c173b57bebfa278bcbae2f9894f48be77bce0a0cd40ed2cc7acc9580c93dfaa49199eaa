{"code":"(this[\"webpackJsonpnew-flare\"]=this[\"webpackJsonpnew-flare\"]||[]).push([[0],{18:function(e,t,n){\"use strict\";n.r(t);var o=n(4),i=n(15),d=n.n(i),r=n(16),a=n.n(r),s=n(17);fetch(\"./fullSenate32.gexf\").then((function(e){return e.text()})).then((function(e){var t=Object(s.parse)(a.a,e),n=document.getElementById(\"sigma-container\"),i=document.getElementById(\"zoom-in\"),r=document.getElementById(\"zoom-out\"),u=document.getElementById(\"zoom-reset\"),l=document.getElementById(\"labels-threshold\"),c=document.getElementById(\"search-input\"),g=document.getElementById(\"suggestions\"),h=new d.a(t,n,{minCameraRatio:.01,maxCameraRatio:3,allowInvalidContainer:!0,renderEdgeLabels:!0}),v=h.getCamera();i.addEventListener(\"click\",(function(){v.animatedZoom({duration:600})})),r.addEventListener(\"click\",(function(){v.animatedUnzoom({duration:600})})),u.addEventListener(\"click\",(function(){v.animatedReset({duration:600})})),l.addEventListener(\"input\",(function(){h.setSetting(\"labelRenderedSizeThreshold\",+l.value)})),l.value=h.getSetting(\"labelRenderedSizeThreshold\")+\"\";var f={searchQuery:\"\"};function m(e){if(f.searchQuery=e,c.value!==e&&(c.value=e),e){var n=e.toLowerCase(),o=t.nodes().map((function(e){return{id:e,label:t.getNodeAttribute(e,\"label\")}})).filter((function(e){return e.label.toLowerCase().includes(n)}));if(1===o.length&&o[0].label===e){f.selectedNode=o[0].id,b(o[0].id),f.suggestions=void 0,p=!0,N=o[0].id;var i=h.getNodeDisplayData(f.selectedNode);h.getCamera().animate(i,{duration:500})}else f.selectedNode=void 0,f.suggestions=new Set(o.map((function(e){return e.id})))}else f.selectedNode=void 0,f.suggestions=void 0;h.refresh()}function b(e){e?(f.hoveredNode=e,f.hoveredNeighbors=new Set(t.neighbors(e))):(f.hoveredNode=void 0,f.hoveredNeighbors=void 0),h.refresh()}g.innerHTML=t.nodes().map((function(e){return'<option value=\"'.concat(t.getNodeAttribute(e,\"label\"),'\"></option>')})).join(\"\\n\"),c.addEventListener(\"input\",(function(){m(c.value||\"\")})),c.addEventListener(\"blur\",(function(){m(\"\")}));var N=void 0,p=!1;h.on(\"clickNode\",(function(e){var t=e.node;N===t?(N=void 0,b(void 0),p=!1):(N=t,p=!0,b(t))})),h.on(\"enterNode\",(function(e){var t=e.node;!1===p&&b(t)})),h.on(\"leaveNode\",(function(e){var t=e.node;!1===p&&N!==t&&b(void 0)})),h.on(\"doubleClickNode\",(function(e){var t=e.node;window.open(\"https://www.opensecrets.org/search?q=\"+t)})),h.setSetting(\"nodeReducer\",(function(e,n){var i=Object(o.a)({},n);return f.hoveredNeighbors&&!f.hoveredNeighbors.has(e)&&f.hoveredNode!==e&&(i.label=\"\",i.color=\"#f6f6f6\"),f.selectedNode===e?i.highlighted=!0:f.suggestions&&!f.suggestions.has(e)&&(i.label=\"\",i.color=\"#f6f6f6\"),f.suggestions&&f.suggestions.has(e)&&(i.highlighted=!0,i.label=t.getNodeAttribute(e,\"label\"),i.color=t.getNodeAttribute(e,\"color\")),i})),h.setSetting(\"edgeReducer\",(function(e,n){var i=Object(o.a)({},n);return f.hoveredNode&&!t.hasExtremity(e,f.hoveredNode)&&(i.hidden=!0),!f.suggestions||f.suggestions.has(t.source(e))&&f.suggestions.has(t.target(e))||(i.hidden=!0),i}))}))}},[[18,1,2]]]);","name":"static/js/main.a5ce4bc9.chunk.js","map":{"version":3,"names":["this","push","module","__webpack_exports__","__webpack_require__","r","_Users_declanbradley_Documents_GitHub_senate_finance_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__","sigma__WEBPACK_IMPORTED_MODULE_1__","sigma__WEBPACK_IMPORTED_MODULE_1___default","n","graphology__WEBPACK_IMPORTED_MODULE_2__","graphology__WEBPACK_IMPORTED_MODULE_2___default","graphology_gexf_browser__WEBPACK_IMPORTED_MODULE_3__","fetch","then","res","text","gexf","graph","Object","a","container","document","getElementById","zoomInBtn","zoomOutBtn","zoomResetBtn","labelsThresholdRange","searchInput","searchSuggestions","renderer","minCameraRatio","maxCameraRatio","allowInvalidContainer","renderEdgeLabels","camera","getCamera","addEventListener","animatedZoom","duration","animatedUnzoom","animatedReset","setSetting","value","getSetting","state","searchQuery","setSearchQuery","query","lcQuery","toLowerCase","suggestions","nodes","map","id","label","getNodeAttribute","filter","_ref","includes","length","selectedNode","setHoveredNode","undefined","clickMode","clickedNode","nodePosition","getNodeDisplayData","animate","Set","_ref2","refresh","node","hoveredNode","hoveredNeighbors","neighbors","innerHTML","concat","join","on","_ref3","_ref4","_ref5","_ref6","window","open","data","has","color","highlighted","edge","hasExtremity","hidden","source","target"],"sources":["static/js/main.a5ce4bc9.chunk.js"],"mappings":"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"},"input":"(this[\"webpackJsonpnew-flare\"] = this[\"webpackJsonpnew-flare\"] || []).push([[0],{\n\n/***/ 18:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Users_declanbradley_Documents_GitHub_senate_finance_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);\n/* harmony import */ var sigma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(15);\n/* harmony import */ var sigma__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(sigma__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var graphology__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16);\n/* harmony import */ var graphology__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(graphology__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var graphology_gexf_browser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(17);\n/* harmony import */ var graphology_gexf_browser__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(graphology_gexf_browser__WEBPACK_IMPORTED_MODULE_3__);\n/**\n * This example shows how to load a GEXF graph file (using the dedicated\n * graphology parser), and display it with some basic map features: Zoom in and\n * out buttons, reset zoom button, and a slider to increase or decrease the\n * quantity of labels displayed on screen.\n */// Load external GEXF file:\nfetch(\"./fullSenate32.gexf\").then(function(res){return res.text();}).then(function(gexf){// Parse GEXF string:\nvar graph=Object(graphology_gexf_browser__WEBPACK_IMPORTED_MODULE_3__[\"parse\"])(graphology__WEBPACK_IMPORTED_MODULE_2___default.a,gexf);// Retrieve some useful DOM elements:\nvar container=document.getElementById(\"sigma-container\");var zoomInBtn=document.getElementById(\"zoom-in\");var zoomOutBtn=document.getElementById(\"zoom-out\");var zoomResetBtn=document.getElementById(\"zoom-reset\");var labelsThresholdRange=document.getElementById(\"labels-threshold\");var searchInput=document.getElementById(\"search-input\");var searchSuggestions=document.getElementById(\"suggestions\");// Instanciate sigma:\nvar renderer=new sigma__WEBPACK_IMPORTED_MODULE_1___default.a(graph,container,{minCameraRatio:0.01,maxCameraRatio:3,allowInvalidContainer:true,renderEdgeLabels:true});var camera=renderer.getCamera();// Bind zoom manipulation buttons\nzoomInBtn.addEventListener(\"click\",function(){camera.animatedZoom({duration:600});});zoomOutBtn.addEventListener(\"click\",function(){camera.animatedUnzoom({duration:600});});zoomResetBtn.addEventListener(\"click\",function(){camera.animatedReset({duration:600});});// Bind labels threshold to range input\nlabelsThresholdRange.addEventListener(\"input\",function(){renderer.setSetting(\"labelRenderedSizeThreshold\",+labelsThresholdRange.value);});// Set proper range initial value:\nlabelsThresholdRange.value=renderer.getSetting(\"labelRenderedSizeThreshold\")+\"\";// Type and declare internal state:\nvar state={searchQuery:\"\"};// Feed the datalist autocomplete values:\nsearchSuggestions.innerHTML=graph.nodes().map(function(node){return\"<option value=\\\"\".concat(graph.getNodeAttribute(node,\"label\"),\"\\\"></option>\");}).join(\"\\n\");// Actions:\nfunction setSearchQuery(query){state.searchQuery=query;if(searchInput.value!==query)searchInput.value=query;if(query){var lcQuery=query.toLowerCase();var suggestions=graph.nodes().map(function(n){return{id:n,label:graph.getNodeAttribute(n,\"label\")};}).filter(function(_ref){var label=_ref.label;return label.toLowerCase().includes(lcQuery);});// If we have a single perfect match, them we remove the suggestions, and\n// we consider the user has selected a node through the datalist\n// autocomplete:\nif(suggestions.length===1&&suggestions[0].label===query){state.selectedNode=suggestions[0].id;setHoveredNode(suggestions[0].id);state.suggestions=undefined;clickMode=true;clickedNode=suggestions[0].id;// Move the camera to center it on the selected node:\nvar nodePosition=renderer.getNodeDisplayData(state.selectedNode);renderer.getCamera().animate(nodePosition,{duration:500});}// Else, we display the suggestions list:\nelse{state.selectedNode=undefined;state.suggestions=new Set(suggestions.map(function(_ref2){var id=_ref2.id;return id;}));}}// If the query is empty, then we reset the selectedNode / suggestions state:\nelse{state.selectedNode=undefined;state.suggestions=undefined;}// Refresh rendering:\nrenderer.refresh();}function setHoveredNode(node){if(node){state.hoveredNode=node;state.hoveredNeighbors=new Set(graph.neighbors(node));}else{state.hoveredNode=undefined;state.hoveredNeighbors=undefined;}// Refresh rendering:\nrenderer.refresh();}// Bind search input interactions:\nsearchInput.addEventListener(\"input\",function(){setSearchQuery(searchInput.value||\"\");});searchInput.addEventListener(\"blur\",function(){setSearchQuery(\"\");});var clickedNode=undefined;var clickMode=false;// Bind graph interactions:\nrenderer.on(\"clickNode\",function(_ref3){var node=_ref3.node;if(clickedNode===node){clickedNode=undefined;setHoveredNode(undefined);clickMode=false;}else{clickedNode=node;clickMode=true;setHoveredNode(node);}});renderer.on(\"enterNode\",function(_ref4){var node=_ref4.node;if(clickMode===false){setHoveredNode(node);}});renderer.on(\"leaveNode\",function(_ref5){var node=_ref5.node;if(clickMode===false){if(clickedNode!==node){setHoveredNode(undefined);}}});renderer.on(\"doubleClickNode\",function(_ref6){var node=_ref6.node;window.open(\"https://www.opensecrets.org/search?q=\"+node);});renderer.setSetting(\"nodeReducer\",function(node,data){var res=Object(_Users_declanbradley_Documents_GitHub_senate_finance_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({},data);if(state.hoveredNeighbors&&!state.hoveredNeighbors.has(node)&&state.hoveredNode!==node){res.label=\"\";res.color=\"#f6f6f6\";}if(state.selectedNode===node){res.highlighted=true;}else if(state.suggestions&&!state.suggestions.has(node)){res.label=\"\";res.color=\"#f6f6f6\";}if(state.suggestions&&state.suggestions.has(node)){res.highlighted=true;res.label=graph.getNodeAttribute(node,\"label\");res.color=graph.getNodeAttribute(node,\"color\");}return res;});// Render edges accordingly to the internal state:\n// 1. If a node is hovered, the edge is hidden if it is not connected to the\n//    node\n// 2. If there is a query, the edge is only visible if it connects two\n//    suggestions\nrenderer.setSetting(\"edgeReducer\",function(edge,data){var res=Object(_Users_declanbradley_Documents_GitHub_senate_finance_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({},data);if(state.hoveredNode&&!graph.hasExtremity(edge,state.hoveredNode)){res.hidden=true;}if(state.suggestions&&(!state.suggestions.has(graph.source(edge))||!state.suggestions.has(graph.target(edge)))){res.hidden=true;}return res;});});\n\n/***/ })\n\n},[[18,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/declanbradley/Documents/GitHub/senate-finance/src/index.ts"],"names":["fetch","then","res","text","gexf","graph","parse","Graph","container","document","getElementById","zoomInBtn","zoomOutBtn","zoomResetBtn","labelsThresholdRange","searchInput","searchSuggestions","renderer","Sigma","minCameraRatio","maxCameraRatio","allowInvalidContainer","renderEdgeLabels","camera","getCamera","addEventListener","animatedZoom","duration","animatedUnzoom","animatedReset","setSetting","value","getSetting","state","searchQuery","innerHTML","nodes","map","node","getNodeAttribute","join","setSearchQuery","query","lcQuery","toLowerCase","suggestions","n","id","label","filter","includes","length","selectedNode","setHoveredNode","undefined","clickMode","clickedNode","nodePosition","getNodeDisplayData","animate","Set","refresh","hoveredNode","hoveredNeighbors","neighbors","on","window","open","data","has","color","highlighted","edge","hasExtremity","hidden","source","target"],"mappings":"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","file":"x","sourcesContent":["/**\n * This example shows how to load a GEXF graph file (using the dedicated\n * graphology parser), and display it with some basic map features: Zoom in and\n * out buttons, reset zoom button, and a slider to increase or decrease the\n * quantity of labels displayed on screen.\n */\n\nimport Sigma from \"sigma\";\nimport Graph from \"graphology\";\nimport { parse } from \"graphology-gexf/browser\";\nimport { Coordinates, EdgeDisplayData, NodeDisplayData } from \"sigma/types\";\n\n// Load external GEXF file:\nfetch(\"./fullSenate32.gexf\")\n  .then((res) => res.text())\n  .then((gexf) => {\n    // Parse GEXF string:\n    const graph = parse(Graph, gexf);\n\n    // Retrieve some useful DOM elements:\n    const container = document.getElementById(\"sigma-container\") as HTMLElement;\n    const zoomInBtn = document.getElementById(\"zoom-in\") as HTMLButtonElement;\n    const zoomOutBtn = document.getElementById(\"zoom-out\") as HTMLButtonElement;\n    const zoomResetBtn = document.getElementById(\n      \"zoom-reset\"\n    ) as HTMLButtonElement;\n    const labelsThresholdRange = document.getElementById(\n      \"labels-threshold\"\n    ) as HTMLInputElement;\n    const searchInput = document.getElementById(\n      \"search-input\"\n    ) as HTMLInputElement;\n    const searchSuggestions = document.getElementById(\n      \"suggestions\"\n    ) as HTMLDataListElement;\n\n    // Instanciate sigma:\n    const renderer = new Sigma(graph, container, {\n      minCameraRatio: 0.01,\n      maxCameraRatio: 3,\n      allowInvalidContainer: true,\n      renderEdgeLabels: true\n    });\n    const camera = renderer.getCamera();\n\n    // Bind zoom manipulation buttons\n    zoomInBtn.addEventListener(\"click\", () => {\n      camera.animatedZoom({ duration: 600 });\n    });\n    zoomOutBtn.addEventListener(\"click\", () => {\n      camera.animatedUnzoom({ duration: 600 });\n    });\n    zoomResetBtn.addEventListener(\"click\", () => {\n      camera.animatedReset({ duration: 600 });\n    });\n\n    // Bind labels threshold to range input\n    labelsThresholdRange.addEventListener(\"input\", () => {\n      renderer.setSetting(\n        \"labelRenderedSizeThreshold\",\n        +labelsThresholdRange.value\n      );\n    });\n\n    // Set proper range initial value:\n    labelsThresholdRange.value =\n      renderer.getSetting(\"labelRenderedSizeThreshold\") + \"\";\n\n    // Type and declare internal state:\n    interface State {\n      hoveredNode?: string;\n      searchQuery: string;\n\n      // State derived from query:\n      selectedNode?: string;\n      suggestions?: Set<string>;\n\n      // State derived from hovered node:\n      hoveredNeighbors?: Set<string>;\n    }\n    const state: State = { searchQuery: \"\" };\n\n    // Feed the datalist autocomplete values:\n    searchSuggestions.innerHTML = graph\n      .nodes()\n      .map(\n        (node) =>\n          `<option value=\"${graph.getNodeAttribute(node, \"label\")}\"></option>`\n      )\n      .join(\"\\n\");\n\n    // Actions:\n    function setSearchQuery(query: string) {\n      state.searchQuery = query;\n\n      if (searchInput.value !== query) searchInput.value = query;\n\n      if (query) {\n        const lcQuery = query.toLowerCase();\n        const suggestions = graph\n          .nodes()\n          .map((n) => ({\n            id: n,\n            label: graph.getNodeAttribute(n, \"label\") as string\n          }))\n          .filter(({ label }) => label.toLowerCase().includes(lcQuery));\n\n        // If we have a single perfect match, them we remove the suggestions, and\n        // we consider the user has selected a node through the datalist\n        // autocomplete:\n        if (suggestions.length === 1 && suggestions[0].label === query) {\n          state.selectedNode = suggestions[0].id;\n          setHoveredNode(suggestions[0].id)\n          state.suggestions = undefined;\n          clickMode = true\n          clickedNode = suggestions[0].id\n\n          // Move the camera to center it on the selected node:\n          const nodePosition = renderer.getNodeDisplayData(\n            state.selectedNode\n          ) as Coordinates;\n          renderer.getCamera().animate(nodePosition, {\n            duration: 500\n          });\n        }\n        // Else, we display the suggestions list:\n        else {\n          state.selectedNode = undefined;\n          state.suggestions = new Set(suggestions.map(({ id }) => id));\n        }\n      }\n      // If the query is empty, then we reset the selectedNode / suggestions state:\n      else {\n        state.selectedNode = undefined;\n        state.suggestions = undefined;\n      }\n\n      // Refresh rendering:\n      renderer.refresh();\n    }\n\n    function setHoveredNode(node?: string) {\n      if (node) {\n        state.hoveredNode = node;\n        state.hoveredNeighbors = new Set(graph.neighbors(node));\n      } else {\n        state.hoveredNode = undefined;\n        state.hoveredNeighbors = undefined;\n      }\n\n      // Refresh rendering:\n      renderer.refresh();\n    }\n\n    // Bind search input interactions:\n    searchInput.addEventListener(\"input\", () => {\n      setSearchQuery(searchInput.value || \"\");\n    });\n    searchInput.addEventListener(\"blur\", () => {\n      setSearchQuery(\"\");\n    });\n\n    var clickedNode = undefined;\n    var clickMode = false;\n    // Bind graph interactions:\n    renderer.on(\"clickNode\", ({ node }) => {\n      if (clickedNode === node) {\n        clickedNode = undefined;\n        setHoveredNode(undefined);\n        clickMode = false;\n      } else {\n        clickedNode = node;\n        clickMode = true;\n        setHoveredNode(node);\n      }\n    });\n    renderer.on(\"enterNode\", ({ node }) => {\n      if (clickMode === false) {\n        setHoveredNode(node);\n      }\n    });\n    renderer.on(\"leaveNode\", ({ node }) => {\n      if (clickMode === false) {\n        if (clickedNode !== node) {\n          setHoveredNode(undefined);\n        }\n      }\n    });\n    renderer.on(\"doubleClickNode\", ({ node }) => {\n      window.open(\"https://www.opensecrets.org/search?q=\" + node);\n    });\n\n    renderer.setSetting(\"nodeReducer\", (node, data) => {\n      const res: Partial<NodeDisplayData> = { ...data };\n\n      if (\n        state.hoveredNeighbors &&\n        !state.hoveredNeighbors.has(node) &&\n        state.hoveredNode !== node\n      ) {\n        res.label = \"\";\n        res.color = \"#f6f6f6\";\n      }\n\n      if (state.selectedNode === node) {\n        res.highlighted = true;\n      } else if (state.suggestions && !state.suggestions.has(node)) {\n        res.label = \"\";\n        res.color = \"#f6f6f6\";\n      }\n\n      if (state.suggestions && state.suggestions.has(node)) {\n        res.highlighted = true;\n        res.label = graph.getNodeAttribute(node, \"label\")\n        res.color = graph.getNodeAttribute(node, \"color\")\n      }\n\n      return res;\n    });\n\n    // Render edges accordingly to the internal state:\n    // 1. If a node is hovered, the edge is hidden if it is not connected to the\n    //    node\n    // 2. If there is a query, the edge is only visible if it connects two\n    //    suggestions\n    renderer.setSetting(\"edgeReducer\", (edge, data) => {\n      const res: Partial<EdgeDisplayData> = { ...data };\n\n      if (state.hoveredNode && !graph.hasExtremity(edge, state.hoveredNode)) {\n        res.hidden = true;\n      }\n\n      if (\n        state.suggestions &&\n        (!state.suggestions.has(graph.source(edge)) ||\n          !state.suggestions.has(graph.target(edge)))\n      ) {\n        res.hidden = true;\n      }\n\n      return res;\n    });\n  });\n"]}}